<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="UTF-8" />
    <title>20. Full Featured 2026</title>
    <link rel="stylesheet" href="./css/tuidoc-example-style.css" />
    <!-- Editor -->
    <link rel="stylesheet" href="../dist/cdn/toastui-editor.css" />
    <!-- Dark theme -->
    <link rel="stylesheet" href="../dist/cdn/theme/toastui-editor-dark.css" />
    <!-- Chart -->
    <link rel="stylesheet" href="https://uicdn.toast.com/chart/v4.3.4/toastui-chart.css" />
    <!-- Code Highlight -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css"
    />
    <link
      rel="stylesheet"
      href="/plugins/code-syntax-highlight/dist/cdn/toastui-editor-plugin-code-syntax-highlight.css"
    />
    <!-- Color syntax -->
    <link
      rel="stylesheet"
      href="https://uicdn.toast.com/tui-color-picker/v2.2.6/tui-color-picker.css"
    />
    <link
      rel="stylesheet"
      href="/plugins/color-syntax/dist/cdn/toastui-editor-plugin-color-syntax.css"
    />
    <!-- Merged Table -->
    <link
      rel="stylesheet"
      href="/plugins/table-merged-cell/dist/cdn/toastui-editor-plugin-table-merged-cell.css"
    />
    <!-- Export -->
    <link
      rel="stylesheet"
      href="/plugins/export/dist/cdn/toastui-editor-plugin-export.css"
    />
    <!-- KaTeX -->
    <link rel="stylesheet" href="/node_modules/katex/dist/katex.min.css" />
    <style>
      html,
      body,
      #app {
        height: 100%;
      }

      body {
        margin: 0;
      }

      .page {
        height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .code-html.tui-doc-contents {
        flex: 1;
        min-height: 0;
        display: flex;
        flex-direction: column;
      }

      #editor {
        flex: 1;
        min-height: 0;
      }

      .toastui-editor-defaultUI {
        height: 100%;
      }

      body.dark {
        background: #111;
      }

      .export-split-icon.theme-split-icon {
        background-color: transparent;
        mask-image: none;
        -webkit-mask-image: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .export-split-icon.theme-split-icon svg {
        display: block;
      }

      .export-split > .export-split-main:only-child {
        border-right: 1px solid #f7f9fc;
        border-radius: 3px;
      }

      .toastui-editor-dark .export-split > .export-split-main:only-child {
        border-right: 1px solid #232428;
      }

      .export-menu-icon.theme-menu-icon {
        background-color: transparent;
        mask-image: none;
        -webkit-mask-image: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .export-menu-icon.theme-menu-icon svg {
        display: block;
      }

      .toastui-editor-defaultUI-toolbar .export-toolbar-group {
        margin-left: auto;
      }

      .toastui-editor-defaultUI-toolbar .export-toolbar-group .toastui-editor-toolbar-divider {
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="app" class="page">
      <div class="code-html tui-doc-contents">
        <!-- Editor -->
        <div id="editor"></div>
      </div>
    </div>
    <!-- Added to check demo page in Internet Explorer -->
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
    <script src="./data/example20-full-featured-2026.js"></script>
    <!-- Editor -->
    <script src="../dist/cdn/toastui-editor-all.js"></script>
    <!-- Chart -->
    <script src="https://uicdn.toast.com/chart/v4.3.4/toastui-chart.js"></script>
    <!-- Color Picker -->
    <script src="https://uicdn.toast.com/tui-color-picker/v2.2.6/tui-color-picker.min.js"></script>
    <!-- Mermaid -->
    <script src="/node_modules/mermaid/dist/mermaid.min.js"></script>
    <!-- Editor's Plugin -->
    <script src="/plugins/chart/dist/cdn/toastui-editor-plugin-chart.js"></script>
    <script src="/plugins/code-syntax-highlight/dist/cdn/toastui-editor-plugin-code-syntax-highlight-all.js"></script>
    <script src="/plugins/color-syntax/dist/cdn/toastui-editor-plugin-color-syntax.js"></script>
    <script src="/plugins/table-merged-cell/dist/cdn/toastui-editor-plugin-table-merged-cell.js"></script>
    <script src="/plugins/uml/dist/cdn/toastui-editor-plugin-uml.js"></script>
    <script src="/plugins/mermaid/dist/cdn/toastui-editor-plugin-mermaid.js"></script>
    <script src="/plugins/katex/dist/cdn/toastui-editor-plugin-katex.js"></script>
    <script src="/plugins/export/dist/cdn/toastui-editor-plugin-export.js"></script>
    <script type="text/babel" class="code-js">
      const { Editor } = toastui;
      const {
        chart,
        codeSyntaxHighlight,
        colorSyntax,
        tableMergedCell,
        uml,
        mermaid,
        katex,
        export: exportPlugin
      } = Editor.plugin;

      const chartOptions = {
        minWidth: 100,
        maxWidth: 600,
        minHeight: 100,
        maxHeight: 300
      };

      const themeStorageKey = 'themeMode';
      const media = window.matchMedia('(prefers-color-scheme: dark)');
      const storedMode = localStorage.getItem(themeStorageKey);
      const themeMode =
        storedMode === 'light' || storedMode === 'dark' || storedMode === 'auto'
          ? storedMode
          : 'auto';
      const initialTheme = themeMode === 'dark' || (themeMode === 'auto' && media.matches) ? 'dark' : 'light';

      const editor = new Editor({
        el: document.querySelector('#editor'),
        previewStyle: 'vertical',
        height: '100%',
        initialEditType: 'wysiwyg',
        initialValue: fullFeatured2026Content,
        theme: initialTheme,
        plugins: [
          [chart, chartOptions],
          [codeSyntaxHighlight, { highlighter: Prism }],
          colorSyntax,
          tableMergedCell,
          uml,
          mermaid,
          katex,
          [exportPlugin, { toolbarGroupIndex: 99, toolbarItemIndex: 1 }]
        ]
      });

      const rootEl = document.querySelector('.toastui-editor-defaultUI');
      const bodyEl = document.body;
      let currentMode = themeMode;
      const themeIcons = Editor.themeIcons;

      const themeSplit = document.createElement('div');
      const themeMainButton = document.createElement('button');
      const themeIconWrap = document.createElement('span');

      themeSplit.className = 'export-split';
      themeSplit.setAttribute('role', 'group');

      themeMainButton.type = 'button';
      themeMainButton.className = 'toastui-editor-toolbar-icons export-split-main';
      themeMainButton.setAttribute('aria-label', 'Theme');
      themeMainButton.setAttribute('aria-haspopup', 'menu');

      themeIconWrap.className = 'export-split-icon theme-split-icon';
      themeMainButton.appendChild(themeIconWrap);

      themeSplit.appendChild(themeMainButton);

      const menuStateKey = '__toastuiToolbarMenuState';
      const menuState = window[menuStateKey] || { openId: null };

      if (!window[menuStateKey]) {
        window[menuStateKey] = menuState;
      }

      if (!menuState.listenerAttached) {
        document.addEventListener('mousedown', (event) => {
          const target = event.target;

          if (
            target.closest('.toastui-editor-popup') ||
            target.closest('.toastui-editor-toolbar-item-wrapper')
          ) {
            return;
          }

          menuState.openId = null;
        });
        menuState.listenerAttached = true;
      }

      const applyTheme = (mode, shouldPersist = true) => {
        const useDark = mode === 'dark' || (mode === 'auto' && media.matches);

        rootEl.classList.toggle('toastui-editor-dark', useDark);
        bodyEl.classList.toggle('dark', useDark);
        themeIconWrap.textContent = '';
        themeIconWrap.appendChild(themeIcons[mode]());
        editor.eventEmitter.emit('change');
        currentMode = mode;

        if (shouldPersist) {
          localStorage.setItem(themeStorageKey, mode);
        }
      };

      const closeThemePopup = () => {
        editor.eventEmitter.emit('closePopup');
        menuState.openId = null;
      };

      const createThemeMenuItem = (label, mode) => {
        const item = document.createElement('li');
        const icon = document.createElement('span');
        const text = document.createElement('span');

        item.className = 'menu-item';
        item.setAttribute('role', 'menuitem');
        item.tabIndex = 0;
        icon.className = 'export-menu-icon theme-menu-icon';
        icon.appendChild(themeIcons[mode]());
        text.textContent = label;
        item.appendChild(icon);
        item.appendChild(text);

        const handleSelect = () => {
          applyTheme(mode);
          closeThemePopup();
        };

        item.addEventListener('click', (event) => {
          event.preventDefault();
          handleSelect();
        });
        item.addEventListener('keydown', (event) => {
          if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            handleSelect();
          } else if (event.key === 'Escape') {
            event.preventDefault();
            closeThemePopup();
          }
        });

        return item;
      };

      const themeMenu = document.createElement('ul');

      themeIconWrap.appendChild(themeIcons[currentMode]());

      themeMenu.className = 'menu-group';
      themeMenu.setAttribute('role', 'menu');
      themeMenu.appendChild(createThemeMenuItem('Auto', 'auto'));
      themeMenu.appendChild(createThemeMenuItem('Light', 'light'));
      themeMenu.appendChild(createThemeMenuItem('Dark', 'dark'));

      editor.insertToolbarItem(
        { groupIndex: 98, itemIndex: 0 },
        {
          el: themeSplit,
          name: 'themeToggle',
          tooltip: 'Theme',
          popup: {
            body: themeMenu,
            className: 'toastui-editor-popup-add-heading export-split-menu'
          }
        }
      );

      const openThemeMenu = () => {
        const wrapper = themeSplit.closest('.toastui-editor-toolbar-item-wrapper');

        if (wrapper) {
          wrapper.dispatchEvent(new MouseEvent('click', { bubbles: true }));
        }
      };

      const toggleThemeMenu = () => {
        if (menuState.openId === 'theme') {
          closeThemePopup();
          return;
        }

        closeThemePopup();
        menuState.openId = 'theme';
        openThemeMenu();
      };

      themeMainButton.addEventListener('click', (event) => {
        event.preventDefault();
        event.stopPropagation();
        toggleThemeMenu();
      });

      themeMainButton.addEventListener('keydown', (event) => {
        if (event.key === 'Enter' || event.key === ' ') {
          event.preventDefault();
          event.stopPropagation();
          toggleThemeMenu();
        } else if (event.key === 'Escape') {
          event.preventDefault();
          closeThemePopup();
        }
      });


      const handleMediaChange = () => {
        if (currentMode === 'auto') {
          applyTheme('auto', false);
        }
      };

      if (media.addEventListener) {
        media.addEventListener('change', handleMediaChange);
      } else {
        media.addListener(handleMediaChange);
      }

      applyTheme(currentMode, false);

      const toolbarEl = document.querySelector('.toastui-editor-defaultUI-toolbar');
      const exportButton = toolbarEl && toolbarEl.querySelector('.export-split');

      if (exportButton) {
        const exportGroup = exportButton.closest('.toastui-editor-toolbar-group');

        if (exportGroup) {
          exportGroup.classList.add('export-toolbar-group');
        }
      }
    </script>
  </body>
</html>
